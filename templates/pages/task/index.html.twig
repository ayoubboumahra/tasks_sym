{% extends './layouts/app.html.twig' %}

{% block title "Tasks" %}

{% block content %}
    <div>

        <a class="btn btn-success mb-3 float-right" href="{{ path('app_task_create') }}">Create new task</a>
        
        <h1>Tasks</h1>

    </div>

    <table class="table table-hover table-stripped table-bordered">
    
        <thead>

            <tr>
                <th>Title</th>
                <th>Assigned to</th>
                <th>Priority</th>
                <th>Status</th>
                <th>Created at</th>
                <th>Actions</th>
            </tr>
        
        </thead>

        <tbody>
            {% for item in tasks %}
                <tr class="{% if item.status == 'completed' %}bg-success text-light font-weight-bold{% endif %}">
                    <td>{{ item.title }}</td>
                    <td>{{ item.getAssignedTo().getName() }}</td>
                    <td>{{ item.priority }}</td>
                    <td>{{ item.status }}</td>
                    <td>{{ item.getCreatedAt() }}</td>
                    <td class="d-flex">
                        <a class="btn btn-info btn-sm mr-1" href="{{ path('app_task_show', { slug: item.slug }) }}">Show</a>
                        <a class="btn btn-warning mr-1 btn-sm" href="{{ path('app_task_edit', { id: item.id }) }}">Edit</a>
                        <form method="POST" action=" {{ path('app_task_destroy',{ id: item.id }) }}">
                            <input type="hidden" name="_method" value="DELETE" />
                            <input type="hidden" name="_token" value="{{ csrf_token('task_delete_'~item.id) }}" />
                            <button class="btn btn-danger btn-sm mr-1" type="submit">Delete</button>
                        </form>
                        <a class="btn btn-light btn-sm mr-1" href="#">Closed</a>
                        <a class="btn btn-dark btn-sm" href="#">Canceled</a>
                    </td>
                </tr>
            {% else %}
                <tr>
                    <td colspan="6">
                        <div class="alert alert-danger m-0">
                            There are no tasks yet, please creare some.
                        </div>
                    </td>
                </tr>
            {% endfor %}
        </tbody>

    </table>

{% endblock %}